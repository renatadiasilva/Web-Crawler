!function(e){"use strict";function i(e,i){if("function"==typeof window.trackMetrics)try{window.trackMetrics({type:"social-click",data:{clickObj:{socialType:"social: "+e,headline:i}}})}catch(a){}}function a(a,t){e.each(a.providers.split(","),function(n,o){i(o,t.title),e.ajax({url:CNN.SocialConfig.gigya.shareStatsPostURL||"",dataType:"json",type:"POST",data:{actionType:"socialShare",socialType:o||"",headline:t.title||"",shortUrl:a.targetURL||"",url:window.location.href||"",env:CNN.contentModel.env||""}})})}function t(e){var i=y||m;i?(i=n(i,e),o(i,e)):window.console&&window.console.error&&window.console.error("No canonical share widget has been defined")}function n(e,i){var a=e.clone();return i&&i.url&&a.setLinkBack(i.url),a}function o(i,t){var n,o,r,s,c=CNN.msib.cfg.gigya;t=t||{},"undefined"!=typeof t.elem&&"undefined"!=typeof t.elem.data("isshorturl")&&(b=t.elem.data("isshorturl")),o=e("<div>").attr("data-js-gigya-share","wrapper").appendTo("body"),r=d(o),s=b?"never":"whenRequired",n={deviceType:"auto",wrap:!0,operationMode:"simpleShare",containerID:r,userAction:i,moreEnabledProviders:c.primaryProviders+","+c.moreEnabledProviders,shortURLs:s,onSendDone:function(e){a(e,i)}},gigya.socialize.showShareUI(n),window.setTimeout(function(){o.attr("data-js-gigya-share-fade","")},10),window.setTimeout(function(){o.attr("data-js-gigya-share-active","")},300)}function r(i,t){var n,o,r,s,c,l,u=CNN.msib.cfg.gigya;t=t||{},"undefined"!=typeof t.elem&&null!==t.elem&&"function"==typeof t.elem.data&&"undefined"!=typeof t.elem.data("isshorturl")&&(b=t.elem.data("isshorturl")),o=e("<div>"),!Modernizr.mobile||Modernizr.ios&&Modernizr.tablet?o.appendTo(t.elem):(o.appendTo("body"),o.css("z-index","100")),r=d(o),s=b?"never":"whenRequired",n={deviceType:"auto",wrap:!0,operationMode:"simpleShare",containerID:r,userAction:i,moreEnabledProviders:u.primaryProviders+","+u.moreEnabledProviders,shortURLs:s,onSendDone:function(e){a(e,i)},onLoad:function(){c=e(t.elem).offset(),l=e(t.elem).find(e("div.gig-simpleShareUI")),"undefined"!=typeof l&&c.left<320&&(!Modernizr.mobile||Modernizr.ios&&Modernizr.tablet?e(l).css("margin-left","35px"):e(l).css("margin-left","0px")),e("div.gig-simpleShareUI-caption").on("click",function(){return!1}),e("div.gig-simpleShareUI-button").on("click",function(){return e("div.gig-simpleShareUI").hide(),!1})}},gigya.socialize.showShareUI(n),window.setTimeout(function(){o.attr("data-js-gigya-share-fade","")},10),window.setTimeout(function(){o.attr("data-js-gigya-share-active","")},300)}function s(e){var i,a=e.attr("data-canonical"),t=e.attr("data-user-message"),n=e.attr("data-link"),o=e.attr("data-title"),r=e.attr("data-subtitle"),s=e.attr("data-description"),d=e.attr("data-image-src"),c=new gigya.socialize.UserAction;return t&&c.setUserMessage(t),n&&(c.setLinkBack(n),c.addActionLink("Read More",n)),o&&c.setTitle("CNN: "+o),r&&c.setSubtitle(r),s&&c.setDescription(s),d&&(i={type:"image",src:d},n&&(i.href=n),c.addMediaItem(i)),"undefined"!=typeof a&&(y=c),b=e.attr("data-isshorturl"),c}function d(e){var i=e.attr("id");if("undefined"==typeof i||""===i){do i="gigyaShareBar_"+v,v+=1;while(document.getElementById(i));e.attr("id",i)}return i}function c(i,t,n){var o,r,s=CNN.msib.cfg.gigya,c=e("<div>"),l=d(c),u=s.showCounts,h="gigya-sharebar-element";w>3&&(h+=" gigya-element-large"),c.addClass(h).appendTo(t),w+=1,"none"===u&&"Facebook-Like"===i&&(u="right"),o=b?"never":"Facebook"===i?"never":"whenRequired",void 0!==s.providerCfg[i]?(s.providerCfg[i].provider=i,r=[s.providerCfg[i]]):r=i,gigya.socialize.showShareBarUI({deviceType:"auto",operationMode:"simpleShare",containerID:l,showCounts:u,userAction:n,shareButtons:r,moreEnabledProviders:s.moreEnabledProviders,shortURLs:o,useEmailCaptcha:!1,showEmailButton:!0,emailBody:"$userMsg$<br /><br />I thought you'd like this:<br />$URL$<br /><br />$title$<br />$description$<br />",useHTML:!0,onSendDone:function(e){a(e,n)}})}function l(e){var i,a=CNN.msib.cfg.gigya.shareButtons.split(","),t=s(e),n=a.length;for(w=1,"undefined"==typeof m&&(m=t),i=0;n>i;i++)c(a[i],e,t)}function u(e){var i=s(e);e.on("click",function(){o(i,{elem:e})}),e.show()}function h(i){var a,t;i.on("click",function(){t=e(this),a=s(t),r(a,{elem:i})})}function f(i){var a=e(".js-gigya-sharebar"),t=e(".js-gigya-share"),n=e(".js-gigya-share-collection");(a.length||t.length||n.length)&&(p=i,CNN.msib.loadGigya(function(e){g(e,a,t,n)}))}function g(i,a,t,n){return!i&&window.console&&window.console.error?void window.console.error("Gigya not loaded -- share bar disabled."):(a.each(function(){l(e(this))}),t.each(function(){u(e(this))}),void n.each(function(){h(e(this))}))}var p,m,y,w,v=0,b=!1;e(window).load(function(){var i,a,t=e(".share-bar-whatsapp-container"),n=0,o=0;if(t.length)if(e("html").hasClass("mobile")&&e("html").hasClass("phone"))for(i=e(".gigya-sharebar-element"),a=0;a<i.length;a++)(3===a||5===n)&&(e(i[a]).after(e(t[o])),e(t[o]).show(),n=0,o++),n++;else e(t).hide()}),e(function(){CNN.msib.onInitialized(f)}),window.CNN=window.CNN||{},CNN.gigyaShareBar=function(){CNN.msib.onInitialized(f)},CNN.share=CNN.share||{},CNN.share.popup=t}(jQuery);
//# sourceMappingURL=gigya-sharebar.min.js.map